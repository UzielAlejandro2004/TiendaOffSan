<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Asistente Virtual Tienda</title>
<style>
    body {
        background: #fdf6f0;
        font-family: "Segoe UI", Arial, sans-serif;
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* ---------- CONTENEDOR GENERAL ---------- */
    #chatbot {
        background: #fff;
        width: 420px;
        border-radius: 20px;
        box-shadow: 0 6px 25px rgba(252,108,133,0.4);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        border: 3px solid #fc6c85;
        animation: fadeIn 0.8s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    #header {
        background: linear-gradient(90deg, #fc6c85, #1f2a40);
        color: #fff;
        text-align: center;
        padding: 18px;
        font-weight: bold;
        font-size: 1.2em;
        letter-spacing: 0.5px;
    }

    #messages {
        padding: 16px;
        height: 380px;
        background: #fff0f5;
        overflow-y: auto;
        scroll-behavior: smooth;
    }

    #input-box {
        display: flex;
        border-top: 2px solid #fc6c85;
        background: #fff;
    }

    #input {
        flex: 1;
        padding: 12px 10px;
        border: none;
        outline: none;
        font-size: 1em;
        background: #fff;
    }

    #send {
        background: #fc6c85;
        border: none;
        color: white;
        padding: 0 22px;
        font-size: 1.2em;
        cursor: pointer;
        transition: background 0.3s;
    }

    #send:hover {
        background: #1f2a40;
    }

    #end-btn {
        background: #1f2a40;
        color: white;
        border: none;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
        padding: 10px;
    }

    #end-btn:hover {
        background: #fc6c85;
    }

    /* ---------- MENSAJES ---------- */
    .bot, .user {
        margin: 8px 0;
        max-width: 90%;
        word-wrap: break-word;
        padding: 10px 14px;
        border-radius: 15px;
        font-size: 1em;
        line-height: 1.4em;
        animation: fadeIn 0.4s ease;
    }

    .bot {
        background: #fc6c85;
        color: white;
        border-top-left-radius: 0;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .user {
        background: #1f2a40;
        color: white;
        align-self: flex-end;
        border-top-right-radius: 0;
        text-align: right;
    }

    /* ---------- BOTONES ---------- */
    .option-btn {
        background: #1f2a40;
        color: #fff;
        border: none;
        border-radius: 8px;
        margin: 5px 4px;
        padding: 8px 12px;
        cursor: pointer;
        font-size: 0.95em;
        transition: all 0.3s ease;
    }

    .option-btn:hover {
        background: #fc6c85;
        transform: scale(1.05);
    }

    /* ---------- PRODUCTOS ---------- */
    .producto-tarjeta {
        display: flex;
        align-items: center;
        background: white;
        border: 2px solid #fc6c85;
        border-radius: 10px;
        padding: 10px;
        margin: 8px 0;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .producto-tarjeta img {
        width: 60px;
        height: 60px;
        border-radius: 8px;
        object-fit: cover;
        margin-right: 10px;
    }
</style>
</head>
<body>
    <div id="chatbot">
        <div id="header">üí¨ Asistente Virtual de la Tienda</div>
        <div id="messages"></div>
        <div id="input-box">
            <input id="input" type="text" placeholder="Escribe tu mensaje..." autocomplete="off" />
            <button id="send">‚û§</button>
        </div>
        <button id="end-btn" onclick="finalizarChat()">Finalizar Chat</button>
    </div>

<script>
const productos = [
  // ROPA MUJER
  {nombre:"Vestido Elegante", categoria:"Ropa Mujer", precio:"$699", img:"imagenes/imagenes/Ropa de mujer/vestidos.jpg"},
  {nombre:"Blusa de Moda", categoria:"Ropa Mujer", precio:"$349", img:"imagenes/imagenes/Ropa de mujer/BlusasDeModa.jpg"},
  {nombre:"Jeans Casual", categoria:"Ropa Mujer", precio:"$550", img:"imagenes/imagenes/Ropa de mujer/JeansCasual.jpg"},
  {nombre:"Su√©ter de Lana", categoria:"Ropa Mujer", precio:"$450", img:"imagenes/imagenes/Ropa de mujer/Su√©terdeLana.jpg"},
  
  // ROPA HOMBRE
  {nombre:"Camisa Casual", categoria:"Ropa Hombre", precio:"$430", img:"imagenes/imagenes/Ropa de hombre/CamisaCasual.jpg"},
  {nombre:"Chaqueta de Cuero", categoria:"Ropa Hombre", precio:"$1150", img:"imagenes/imagenes/Ropa de hombre/ChaquetadeCuero.jpg"},
  {nombre:"Jeans Azul", categoria:"Ropa Hombre", precio:"$590", img:"imagenes/imagenes/Ropa de hombre/JeansAzul.jpg"},
  {nombre:"Camisa Blanca", categoria:"Ropa Hombre", precio:"$420", img:"imagenes/imagenes/Ropa de hombre/CamisaBlanca.jpg"},

  // ACCESORIOS HOMBRE
  {nombre:"Cintur√≥n de Cuero", categoria:"Accesorios Hombre", precio:"$220", img:"imagenes/Accesorios hombres/Cintur√≥ndecuero.jpg"},
  {nombre:"Reloj Elegante", categoria:"Accesorios Hombre", precio:"$750", img:"imagenes/Accesorios hombres/RelojElegante.jpg"},
  {nombre:"Gafas de Sol", categoria:"Accesorios Hombre", precio:"$310", img:"imagenes/Accesorios hombres/Gafasdesol.png"},
  {nombre:"Billetera de Cuero", categoria:"Accesorios Hombre", precio:"$290", img:"imagenes/Accesorios hombres/Billeteradecuero.jpg"},

  // ACCESORIOS VARIADOS
  {nombre:"Bufanda", categoria:"Accesorios Variados", precio:"$180", img:"imagenes/imagenes/Accesorios Bariados/Bufanda.jpg"},
  {nombre:"Sombrero", categoria:"Accesorios Variados", precio:"$260", img:"imagenes/imagenes/Accesorios Bariados/Sombrero.jpg"},
  {nombre:"Guantes", categoria:"Accesorios Variados", precio:"$210", img:"imagenes/imagenes/Accesorios Bariados/Guantes.jpg"},
  {nombre:"Pulsera", categoria:"Accesorios Variados", precio:"$120", img:"imagenes/imagenes/Accesorios Bariados/Pulsera.jpg"}
];

let carrito=[], estado="inicio";
const messages=document.getElementById("messages");

function printBot(html){messages.innerHTML+=`<div class='bot'>${html}</div>`;messages.scrollTop=messages.scrollHeight;}
function printUser(html){messages.innerHTML+=`<div class='user'>${html}</div>`;messages.scrollTop=messages.scrollHeight;}

window.onload=()=>{mensajeBienvenida();};

function mensajeBienvenida(){
    estado="inicio";
    messages.innerHTML="";
    printBot("üëã ¬°Hola! Soy tu asistente virtual. Te puedo ayudar con productos, pagos, env√≠os o contactar con un asesor humano. ¬øQu√© deseas hacer?");
    showQuickMenu();
}

function showQuickMenu(){
    printBot(`
        <button class="option-btn" onclick="themeOption('productos')">üõç Productos</button>
        <button class="option-btn" onclick="themeOption('populares')">üî• Populares</button>
        <button class="option-btn" onclick="themeOption('pagos')">üí≥ Pagos</button>
        <button class="option-btn" onclick="themeOption('env√≠o')">üöö Env√≠os</button>
        <button class="option-btn" onclick="themeOption('contacto')">üë©‚Äçüíº Asesor</button>
        <button class="option-btn" onclick="themeOption('queja')">‚ö†Ô∏è Quejas</button>
        <button class="option-btn" onclick="themeOption('ayuda')">‚ùì Gu√≠a</button>
    `);
}

document.getElementById("send").onclick=userMessage;
document.getElementById("input").addEventListener("keydown",e=>{if(e.key==="Enter")userMessage();});

function userMessage(){
    let msg=document.getElementById("input").value.trim();
    if(!msg)return;
    printUser(msg);
    botReply(msg);
    document.getElementById("input").value="";
}

function themeOption(op){
    if(op==='productos'){
        estado="categoria";
        printUser("Quiero informaci√≥n sobre productos");
        printBot(`¬øDe qu√© categor√≠a buscas?<br>
            <button class="option-btn" onclick="categoryProducts('Ropa Mujer')">üëó Ropa Mujer</button>
            <button class="option-btn" onclick="categoryProducts('Ropa Hombre')">üëï Ropa Hombre</button>
            <button class="option-btn" onclick="categoryProducts('Accesorios Hombre')">üëî Accesorios Hombre</button>
            <button class="option-btn" onclick="categoryProducts('Accesorios Variados')">üéÅ Accesorios Variados</button>
        `);
    } else if(op==='populares'){
        printUser("Mu√©strame lo m√°s popular");
        productos.slice(0,4).forEach(p=>{
            printBot(`
            <div class="producto-tarjeta">
                <img src="${p.img}" alt="${p.nombre}">
                <div><b>${p.nombre}</b><br>Precio: ${p.precio}</div>
            </div>
            <button class="option-btn" onclick="addToCart('${p.nombre}')">üõí Agregar</button>
            `);
        });
    } else if(op==='pagos'){
        printBot("üí≥ Aceptamos tarjetas, PayPal, OXXO, transferencia y Apple/Google Pay.");
    } else if(op==='env√≠o'){
        printBot("üöö Env√≠os nacionales e internacionales con rastreo. Express y est√°ndar disponibles.");
    } else if(op==='contacto'){
        printBot("üë©‚Äçüíº Cont√°ctanos por WhatsApp +52 123 456 7890 o correo soporte@tienda.com");
    } else if(op==='queja'){
        estado="queja";
        printBot("Por favor escribe tu queja. La enviaremos a soporte.");
    } else if(op==='ayuda'){
        printBot("üõí Elige un producto, agr√©galo al carrito y selecciona forma de pago. ¬°Es f√°cil!");
    }
}

function categoryProducts(cat){
    estado="detalle";
    let fil=productos.filter(p=>p.categoria===cat);
    if(fil.length){
        fil.forEach(p=>{
            printBot(`
            <div class="producto-tarjeta">
                <img src="${p.img}" alt="${p.nombre}">
                <div><b>${p.nombre}</b><br>${p.precio}<br><small>${p.categoria}</small></div>
            </div>
            <button class="option-btn" onclick="addToCart('${p.nombre}')">üõí Agregar</button>
            `);
        });
    }
}

function addToCart(nombre){
    carrito.push(nombre);
    printBot(`‚úÖ ${nombre} agregado al carrito.<br><b>Carrito:</b> ${carrito.join(", ")}`);
}

function botReply(msg){
    msg=msg.toLowerCase();
    if(estado==="queja"){
        printBot("Gracias por tu queja, ser√° revisada. ¬øDeseas volver al men√∫?");
        showQuickMenu();
        estado="inicio";
        return;
    }
    if(msg.includes("gracias")||msg.includes("adios")){
        printBot("¬°Gracias por tu visita! üëã");
        showQuickMenu();
        return;
    }
    printBot("No entend√≠ bien tu mensaje. Usa palabras como 'productos', 'pagos', 'env√≠o', o 'ayuda'.");
}

function finalizarChat(){
    messages.innerHTML="";
    printBot("‚úÖ Chat finalizado. ¬øDeseas iniciar de nuevo?");
    showQuickMenu();
    carrito=[];
}
</script>
</body>
</html>
